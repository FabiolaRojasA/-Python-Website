<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
       
        <title>{% block title %} Home {% endblock %}</title>
       
         <!-- Bootstrap 5 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

    </head>

    <body class="bg-light">
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">NotesApp</a>

        <div class="navbar-nav ms-auto">
            {% if current_user.is_authenticated %}
                <a class="nav-link" href="{{ url_for('auth.logout') }}">Logout</a>
            {% else %}
                {% if request.endpoint == 'auth.login' %}
                    <a class="nav-link" href="{{ url_for('auth.signup') }}">Sign Up</a>

                {% elif request.endpoint == 'auth.signup' %}
                    <a class="nav-link" href="{{ url_for('auth.login') }}">Login</a>

                {% else %}
                    <a class="nav-link" href="{{ url_for('auth.login') }}">Login</a>
                    <a class="nav-link" href="{{ url_for('auth.signup') }}">Sign Up</a>
                {% endif %}
            {% endif %}
        </div>
    </div>
</nav>

<!-- Flash messages -->

<div class="container mt-3">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} alert-dismissible fade show">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>
       
<!-- Main content -->
<div class="container">
    {% block content %}
    {% endblock %} 
</div>                  

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='index.js') }}"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll("form").forEach(form => {
            form.addEventListener("submit", () => {
                const btn = form.querySelector(".submit-btn");
                if (!btn) return;

                const spinner = btn.querySelector(".spinner-border");
                const text = btn.querySelector(".btn-text");

                btn.disabled = true;
                btn.classList.add("loading");

                if (spinner) spinner.classList.remove("d-none");
                if (text) text.textContent = btn.dataset.loadingText || "Loading...";
            });
        });
    });
</script>


</body>
</html>
